!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("request")):"function"==typeof define&&define.amd?define(["request"],t):"object"==typeof exports?exports.WeVision=t(require("request")):e.WeVision=t(e.request)}(this,function(e){return function(e){function t(n){if(r[n])return r[n].exports;var o=r[n]={exports:{},id:n,loaded:!1};return e[n].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var r={};return t.m=e,t.c=r,t.p="/",t(0)}([function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function o(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){function n(o,u){try{var i=t[o](u),a=i.value}catch(s){return void r(s)}return i.done?void e(a):Promise.resolve(a).then(function(e){return n("next",e)},function(e){return n("throw",e)})}return n("next")})}}Object.defineProperty(t,"__esModule",{value:!0}),t.searchById=t.showProducts=t.getCategoryData=t.searchByImage=void 0;var u=r(1),i=n(u),a="http://api.wide-eyes.it";t.searchByImage=function(e,t){return new Promise(function(r,n){i.default.post(a+"/v4/SearchByImage").set("Content-Type","application/json").set("Authorization","Bearer "+e).send(t).end(function(e,t){if(e||!(t.body instanceof Object))return n(_createError(e));var o=t.body.attributes,u=[],i=[];return t.body.results.map(function(e){u.push({name:e.category}),i=i.concat(e.products)}),r({categories:u,products:i,attributes:o})})})},t.getCategoryData=function(){var e=o(regeneratorRuntime.mark(function t(e,r){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(t,n){i.default.post(a+"/get_category_data").set("Authorization","Bearer "+e).set("Content-Type","application/json").send(r?{weCategories:!0}:{}).end(function(e,r){!e&&r.body instanceof Object?t(r.body.categories):n(_createError(e,r))})}));case 1:case"end":return t.stop()}},t,void 0)}));return function(t,r){return e.apply(this,arguments)}}(),t.showProducts=function(){var e=o(regeneratorRuntime.mark(function t(e,r){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(t,n){i.default.post(a+"/show_products").set("Authorization","Bearer "+e).set("Content-Type","application/json").send(r).end(function(e,r){!e&&r.body instanceof Object?t(r.body.products):n(_createError(e,r))})}));case 1:case"end":return t.stop()}},t,void 0)}));return function(t,r){return e.apply(this,arguments)}}(),t.searchById=function(){var e=o(regeneratorRuntime.mark(function t(e,r){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(t,n){i.default.post(a+"/v4/SearchById").set("Authorization","Bearer "+e).set("Content-Type","application/json").send(r).end(function(e,r){!e&&r.body instanceof Object?t(r.body.results[0].products):n(_createError(e,r))})}));case 1:case"end":return t.stop()}},t,void 0)}));return function(t,r){return e.apply(this,arguments)}}()},function(t,r){t.exports=e}])});